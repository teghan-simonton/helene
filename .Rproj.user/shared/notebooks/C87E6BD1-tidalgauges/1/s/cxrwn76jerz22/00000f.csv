"0","#grab the highest water level, and station, from each storm. Then combine for a datawrapper chart"
"0",""
"0","# Get the names of all objects in the global environment"
"0","obj_names <- ls()"
"0",""
"0","# Filter to include only data frames (assuming all objects are data frames)"
"0","obj_names <- obj_names[sapply(obj_names, function(x) is.data.frame(get(x)))]"
"0",""
"0","# Initialize an empty list to store results"
"0","results_list <- list()"
"0",""
"0","# Loop over each object name, apply the function, and store the result"
"0","for (name in obj_names) {"
"0","  data <- get(name) %>%"
"0","    arrange(desc(water_level)) %>%"
"0","    head(1)"
"0","  "
"0","  # Add the result to the list, named by the object name"
"0","  results_list[[name]] <- data"
"0","}"
"0",""
"0","# Combine the results into a new data frame"
"0","results_df <- bind_rows(results_list, .id = ""source"")"
"0",""
"0","#calculate surge"
"0",""
"0","results_df <- results_df %>% "
"0","  mutate(difference = water_level-prediction)"
"0",""
"0","write_csv(results_df, ""record_levels.csv"")"
"0",""
